<html>
    <head>
        <title>Wenzhuang Tian's homework 8</title>
        <meta charset="UTF-8">
        
        
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://code.highcharts.com/stock/highstock.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        
        <link rel = "stylesheet" href = "https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
        
        <link rel="stylesheet" href="style.css" type="text/css">
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css">
        <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
        <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular-animate.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
        <script src = "https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
        <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
        <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular-animate.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
        
        
    </head>
    
    <body ng-app = "App"  ng-controller = "SearchCtrl" ng-cloak>
        
        <div id="fb-root"></div>
        <script type="text/javascript" src="stock.js"></script>
        
        <div class="well container" id="search_box">
            <div id="search_title">
                <h4><b>Stock Market Search</b></h4>
            </div>
            
                <div class="col-xs-18 col-md-3" id="search_header">
                    <b>Enter Stock Ticker Sympol:<span style="color:red">*</span></b>
                </div>
                <!--
                <div class="col-md-6">
                    <div ng-controller = "SearchCtrl as ctrl" layout = "column" ng-cloak>
                         <md-content class = "md-padding">
                            <form ng-submit = "$event.preventDefault()">
                               <md-autocomplete
                                  ng-disabled = "ctrl.isDisabled"
                                  md-no-cache = "ctrl.noCache"
                                  md-selected-item = "ctrl.selectedItem"
                                  md-search-text-change = "ctrl.searchTextChange(ctrl.searchText)"
                                  md-search-text = "ctrl.searchText"
                                  md-selected-item-change = "ctrl.selectedItemChange(item)"
                                  md-items = "item in ctrl.querySearch(ctrl.searchText)"
                                  md-item-text = "item.display"
                                  md-min-length = "1"
                                  placeholder = "e.g. AAPL">
                                  <md-item-template>
                                     <span md-highlight-text = "ctrl.searchText"
                                        md-highlight-flags = "^i">{{item.display}}</span>
                                  </md-item-template>

                               </md-autocomplete>               
                            </form>
                         </md-content>
                      </div>
                </div>
                <div class="col-md-3" id="search_header">
                    <button type="submit" class="btn btn-primary" id="getQuote" ng-disabled="isInput()" onclick="getquote()"><span class="glyphicon glyphicon-search"></span>&nbsp;Get Quote</button>
                    <button type="reset" class="btn btn-default" id="clear"><span class="glyphicon glyphicon-refresh"></span>&nbsp;Clear</button>
                </div>
                -->
                
                <form>
                <div class="col-xs-18 col-md-6">
                    
                    <input type="text" id="input" class="form-control input-md" placeholder="e.g. AAPL" ng-model="data.input" >
                </div>
                <div class="col-xs-18 col-md-3">
                    <button type="submit" class="btn btn-primary" id="getQuote" ng-disabled="isInput()" onclick="getquote()"><span class="glyphicon glyphicon-search"></span>&nbsp;Get Quote</button>
                    <button type="reset" class="btn btn-default" id="clear"><span class="glyphicon glyphicon-refresh"></span>&nbsp;Clear</button>
                </div>
                </form>
                
            
            
                <div class="col-xs-18 col-md-offset-3 col-md-6" ng-bind = "data.message">
                    {{data.message}}
                </div>
            
        </div>
        <div class="container" id="line">
        </div>
        <div class="well container" id="data_area">
            <div class="slidemodel" ng-hide="data.favorite_hide">
            <div class="panel panel-default animate-slide" ng-hide="data.favorite_hide">
              <!-- Default panel contents -->
            <div class="panel-heading">
                <div class="row">
                <b class="col-md-2">Favorite List</b>
                <div class="col-md-10">
                <button class="btn btn-default" id="right_button_sideright" onclick="slide()" ng-disabled="data.stock_details_hide"><span class="glyphicon glyphicon-chevron-right"></span></button>
                <button class="btn btn-default" id="right_button_refresh" onclick="refresh()"><span class="glyphicon glyphicon-refresh"></span></button>
                <div id="right_refresh_switch"><input type="checkbox" ng-click="autorefresh()" data-toggle="toggle" data-size="small"></div>
                <p id="right_refresh_text">Automatic Refresh:</p>
                </div>
                </div>
            </div>
            <div id="favorite_list">
              <div class="panel-body" id="dropdown_row">
                    <div class="col-xs-18 col-md-3">
                      <b>Sort by</b>
                      <select id="order_button" ng-model="selectedmethod" class="btn btn-default dropdown-toggle " ng-options="item for item in method" ></select>
                    </div>
                    <div class="col-xs-18 col-md-3">
                      <b>Order</b>
                      <select id="order_button" ng-model="selectedorder" class="btn btn-default dropdown-toggle " ng-options="item for item in order" ></select>
                    </div>
                      <!--
                        <div class="btn-group">
                          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Default <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu">
                            <li><a href="#price">Default</a></li>
                            <li><a href="#">Symbol</a></li>
                            <li><a href="#">Price</a></li>
                            <li><a href="#">Change</a></li>
                            <li><a href="#">Change Percent</a></li>
                            <li><a href="#">Volume</a></li>
                          </ul>
                        </div>
                      <b>Order</b>
                      <div class="btn-group">
                          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Ascending <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu">
                            <li><a href="#">Ascending</a></li>
                            <li><a href="#">Descending</a></li>
                          </ul>
                        </div>
                      -->
                    
                  </div>
                
                    <table class="table table-striped" id="favorite_list_content">
                        <tr>
                            <th>Symbol</th><th>Stock Price</th><th>Change(Change Percent)</th><th>Volume</th><th></th>
                        </tr>
                        <tr ng-repeat="x in showlist | orderBy : data.orderby">
                            <td><a herf="" ng-click="searchagain(x.symbol)">{{x.symbol}}</a></td>
                            <td>{{x.price}}</td>
                            <td><span ng-class="x.color">{{x.change}}({{x.changepercent}}%)</span><img id="arrow" ng-src="{{x.imgurl}}"></td>
                            <td>{{x.volume}}</td>
                            <td><button class="btn btn-default" ng-click="favorite_delete(x.symbol)"><span class="glyphicon glyphicon-trash"></span></button></td>
                        </tr>
                    </table>
            </div>
            </div>
            </div>
            <div class="slidemodel" ng-hide="data.details_hide">
            <div class="panel panel-default animate-slide" ng-hide="data.details_hide">
                <div class="panel-heading">
                    <div class="row">
                    <div class="col-md-1">
                    <button class="btn btn-default" onclick="slide()"><span class="glyphicon glyphicon-chevron-left"></span></button>
                    </div>
                    <b class="col-md-offset-4 col-md-2" id="stock_details_title">Stock Details</b>
                    </div>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-pills" id="stock_details_pills">
                        <li role="presentation" class="active"><a data-toggle="tab" href="#current_stock" onclick="currentstock()"><span class="glyphicon glyphicon-dashboard"></span>&nbsp;Current Stock</a></li>
                        <li role="presentation"><a data-toggle="tab" href="#historical_charts" onclick="highstock()"><span class="glyphicon glyphicon-stats"></span>&nbsp;Historical Charts</a></li>
                        <li role="presentation"><a data-toggle="tab" href="#news_feeds" onclick="newsfeeds()"><span class="glyphicon glyphicon-link"></span>&nbsp;News Feeds</a></li>
                    </ul>
                    <div class="container" id="gray_line"></div>
                    <div class="tab-content">
                    <div id="current_stock" class="tab-pane fade in active" >
                        <div class="row">
                        <div class="col-xs-18 col-md-6" id="stock_table">
                            <div class="row" style="margin-left: 10px;margin-bottom: 20px;">
                                <b>Stock Detials</b>
                                <div id="stock_table_button">
                                <button class="btn btn-default" id="star_button" onclick="favorite_star()"><span class="glyphicon glyphicon-star-empty"></span></button>
                                <button class="btn btn-default" id="facebook_button" onclick="facebookshare()"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/facebook.png" style="width: 20px;height: 20px;"></button>
                                </div>
                            </div>
                            <table class="table table-striped">
                                <tr>
                                    <th>Stock Ticker Symbol</th><td>{{data.symbol}}</td>
                                </tr>
                                <tr>
                                    <th>Last Price</th><td>{{data.last_price}}</td>
                                </tr>
                                <tr>
                                    <th>Change(Change Percent)</th><td id="changeChangePercent"></td>
                                </tr>
                                <tr>
                                    <th>Timestamp</th><td>{{data.timestamp}}</td>
                                </tr>
                                <tr>
                                    <th>Open</th><td>{{data.open}}</td>
                                </tr>
                                <tr>
                                    <th>Close</th><td>{{data.last_price}}</td>
                                </tr>
                                <tr>
                                    <th>Day's Range</th><td>{{data.range}}</td>
                                </tr>
                                <tr>
                                    <th>Volume</th><td>{{data.volume}}</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-xs-18 col-md-6" id="high_charts">
                            <ul class="nav nav-tabs">
                                <li role="presentation" class="active"><a data-toggle="tab" href="#price" onclick="price()">Price</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#sma" onclick="sma()">SMA</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#ema" onclick="ema()">EMA</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#stoch" onclick="stoch()">STOCH</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#rsi" onclick="rsi()">RSI</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#adx" onclick="adx()">ADX</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#cci" onclick="cci()">CCI</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#bbands" onclick="bbands()">BBANDS</a></li>
                                <li role="presentation"><a data-toggle="tab" href="#macd" onclick="macd()">MACD</a></li>
                            </ul>
                            <div id="price" class="tab-pane fade in active" ng-hide="data.price_hide">
                                <div class="progress" id="progress_bar">
                                  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                    <span class="sr-only">45% Complete</span>
                                  </div>
                                </div>
                            </div>
                            <div id="sma" class="tab-pane fade" ng-hide="data.sma_hide">
                            </div>
                            <div id="ema" class="tab-pane fade" ng-hide="data.ema_hide">
                            </div>
                            <div id="stoch" class="tab-pane fade" ng-hide="data.stoch_hide">
                            </div>
                            <div id="rsi" class="tab-pane fade" ng-hide="data.rsi_hide">
                            </div>
                            <div id="adx" class="tab-pane fade" ng-hide="data.adx_hide">
                            </div>
                            <div id="cci" class="tab-pane fade" ng-hide="data.cci_hide">
                            </div>
                            <div id="bbands" class="tab-pane fade" ng-hide="data.bbands_hide">
                            </div>
                            <div id="macd" class="tab-pane fade" ng-hide="data.macd_hide">
                            </div>
                        </div>
                        </div>
                    </div>
                    <div id="historical_charts" class="tab-pane fade" >
                        <div id="highstock">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                <span class="sr-only">45% Complete</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="news_feeds" class="tab-pane fade" >
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                <span class="sr-only">45% Complete</span>
                                </div>
                            </div>
                    </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        
    </body>
</html>